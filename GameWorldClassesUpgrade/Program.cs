// See https://aka.ms/new-console-template for more information
using GameWorld_classes;
using GameWorldClassesUpgrade;

Console.WriteLine("Hello, World!");
Console.CursorVisible = false;
GameScreen mapScreen = new GameScreen();
//char[,] map =
//{
//    {'#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#',},
//    {'#','A','A','A','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ','W','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ','M',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ','W','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ','W','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','#','#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',' ',' ',' ',' ',' ',' ',' ',' ',' ','#',},
//    {'#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#',},

//};
Console.SetCursorPosition(0, 0);
Player player1 = new Player { };
player1.Nickname = "Chubrik";
PlayerPosition player1position= new PlayerPosition (6,6,0);

Player player2 = new Player { };
player1.Nickname = "Chubrik2";
PlayerPosition player2position = new PlayerPosition(7, 7, 0);

//int userX=6,  userY=6;
//char[] bag = new char[1];
while (true)
{
    Console.SetCursorPosition(0, 25);
    Console.Write($"Nickname {player1.Nickname} \nHP игрока {player1.HP}\nБроня{player1.Armor.ArmorValue}");
    //for (int k = 0; k < bag.Length; k++)
    //{
    //    Console.Write(bag[k] + " ");
    //}
    Console.SetCursorPosition(0, 0);
    for (int i = 0; i < ; i++)
    {
        for (int j = 0; j < mapScreen.mapHorizontalLenght; j++)
        {
            Console.Write(map[i, j]);
        }
        Console.WriteLine();

    }

    Console.SetCursorPosition( player1position.Y, player1position.X);
    GameScreen gameScreen = new GameScreen();
    Console.Write($"{ player1.Model}");
    ConsoleKeyInfo charKey = Console.ReadKey();
    //switch (charKey.Key)
    //{
    //    case ConsoleKey.UpArrow:
    //        if (map[userX - 1, userY] != '#')
    //            userX--;
    //        break;
    //    case ConsoleKey.DownArrow:
    //        if (map[userX + 1, userY] != '#')
    //            userX++;
    //        break;
    //    case ConsoleKey.LeftArrow:
    //        if (map[userX, userY-1] != '#')
    //            userY--;
    //        break;
    //    case ConsoleKey.RightArrow:
    //        if (map[userX, userY + 1] != '#')
    //            userY++;
    //        break;
    //}
    switch (charKey.Key)
    {
        case ConsoleKey.UpArrow:
            if (map[player1position.X - 1, player1position.Y] != '#')
                player1position.X--; player1.Model = player1.ModelViewTop;
            break;
        case ConsoleKey.DownArrow:
            if (map[player1position.X + 1, player1position.Y] != '#')
                player1position.X++; player1.Model = player1.ModelViewBot;
            break;
        case ConsoleKey.LeftArrow:
            if (map[player1position.X, player1position.Y - 1] != '#')
                 player1position.Y--; player1.Model = player1.ModelViewLeft;
            break;
        case ConsoleKey.RightArrow:
            if (map[player1position.X, player1position.Y + 1] != '#')
                 player1position.Y++; player1.Model = player1.ModelViewRight;
            break;
    }
    //if (map[player1position.X, player1position.Y]=='A' )
    //{
    //    map[player1position.X,  player1position.Y] = 'o';
    //    char[] tempBag = new char[bag.Length+1];
    //    for (int i = 0; i < bag.Length; i++)
    //    {
    //        tempBag[i]=bag[i];
    //    }
    //    tempBag[tempBag.Length - 1]='A';
    //    bag = tempBag;  

    //}
    if (map[player1position.X, player1position.Y] == 'A')
    {
        map[player1position.X, player1position.Y] = 'o';
        player1.Armor.ArmorValue += 50;

    }
    if (map[player1position.X, player1position.Y] == 'M')
    {
        map[player1position.X, player1position.Y] = 'o';
        player1.HP += 100;

    }
    Console.Clear();
}